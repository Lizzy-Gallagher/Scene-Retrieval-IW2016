#!/bin/bash

# Run from data/weka

if [[ $# != 3 ]]; then
    echo "Usage: $0 filename category category"
    exit
fi

input_filename=$1
cat1=$2
cat2=$3
output_filename="filtered/$cat1""-""$cat2.arff"

echo
echo "Filtering..."
echo
echo "Old linecount:"
echo $(wc -l $input_filename)
echo

# headersize=$(wc -l header | grep -Eo '[0-9]{1,4}')
# echo $headersize
# # six=6
# numcols=$((${headersize} - 6))
# echo $numcols
# exit

#cat1_num=$(nfc $cat1 | cut -d : -f 1)
#cat2_num=$(nfc $cat2 | cut -d : -f 1)

#awk 'BEGIN { FS="," }; { print $NF }' $input_filename > $output_filename

awk 'BEGIN { FS="," }; $NF ~ awk_cat1 || $NF ~ awk_cat2 || NR < 1256 { print; }' awk_cat1=$cat1 awk_cat2=$cat2 $input_filename > $output_filename

echo "New linecount:"
echo $(wc -l $output_filename)
echo
